<div xmlns:th="http://www.thymeleaf.org" th:fragment="content">
  <div class="favorites-container my-5">
    <h2 class="section-title mb-4 text-center" th:text="#{favorites.title}">
      <i class="bi bi-heart-fill text-danger me-2"></i>Sản phẩm bạn yêu thích
    </h2>

    <!-- ▸ Danh sách yêu thích -->
    <div class="row row-cols-1 row-cols-md-3 g-4" th:if="${!#lists.isEmpty(favorites)}">
      <div class="col" th:each="favorite : ${favorites}">
        <div class="favorites-card h-100 shadow-sm border-0 rounded-4">
          <!-- ▸ Hình ảnh -->
          <img th:src="@{|/images/${favorite.product.images}|}" alt="Sản phẩm"
               class="favorites-card-img-top product-img img-fluid rounded"
               style="height: 200px; object-fit: cover;"
               onerror="this.onerror=null;this.src='/images/no-image.png';" />

          <!-- ▸ Thông tin sản phẩm -->
          <div class="favorites-card-body">
            <h5 class="favorites-card-title" th:text="${favorite.product.name}">Tên sản phẩm</h5>
          </div>

          <!-- ▸ Nút hành động -->
          <div class="favorites-card-footer d-flex justify-content-between align-items-center bg-light">
            <a th:href="@{'/products/detail/' + ${favorite.product.productId}}"
               class="favorites-btn-outline-primary btn btn-sm" th:text="#{favorites.view.detail}">
              <i class="bi bi-eye me-1"></i> Xem chi tiết
            </a>

            <form th:action="@{'/favorites/delete/' + ${favorite.favoriteId}}" method="post"
                  th:onsubmit="'return confirm(\'' + #{favorites.delete.confirm} + '\')'">
              <button class="favorites-btn-outline-danger btn btn-sm" type="submit">
                <i class="bi bi-trash me-1"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- ▸ Nếu không có sản phẩm yêu thích -->
    <div th:if="${#lists.isEmpty(favorites)}" class="text-center mt-5">
      <i class="bi bi-emoji-frown fs-1 text-secondary"></i>
      <p class="text-muted mt-3" th:text="#{favorites.empty}">Bạn chưa yêu thích sản phẩm nào.</p>
      <a href="/products" class="favorites-btn-primary btn mt-2" th:text="#{favorites.explore}">
        <i class="bi bi-compass me-1"></i> Khám phá sản phẩm
      </a>
    </div>
  </div>
</div>

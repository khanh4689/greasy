<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>üõí Gi·ªè h√†ng c·ªßa b·∫°n</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</head>
<body class="container mt-4">

<h2 class="mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>

<div th:if="${#lists.isEmpty(items)}" class="alert alert-info">
  Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.
</div>

<div th:if="${!#lists.isEmpty(items)}">
  <table class="table table-bordered align-middle text-center">
    <thead class="table-light">
    <tr>
      <th>#</th>
      <th>T√™n s·∫£n ph·∫©m</th>
      <th>S·ªë l∆∞·ª£ng</th>
      <th>Gi√°</th>
      <th>Th√†nh ti·ªÅn</th>
      <th>Xo√°</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="item, iter : ${items}">
      <td th:text="${iter.count}">1</td>
      <td th:text="${item.product.name}">T√™n SP</td>
      <td>
        <form th:action="@{/user/cart/update}" method="post" class="d-flex justify-content-center">
          <input type="hidden" name="cartItemId" th:value="${item.cartItemId}"/>
          <input type="number" name="quantity" min="1" class="form-control w-50"
                 th:value="${item.quantity}" required/>
          <button type="submit" class="btn btn-sm btn-outline-success ms-2">C·∫≠p nh·∫≠t</button>
        </form>
      </td>
      <td th:text="${#numbers.formatDecimal(item.product.price, 0, 'POINT', 3, 'COMMA') + ' ƒë'}">0</td>
      <td th:text="${#numbers.formatDecimal(item.product.price * item.quantity, 0, 'POINT', 3, 'COMMA') + ' ƒë'}">0</td>
      <td>
        <form th:action="@{/user/cart/remove}" method="post">
          <input type="hidden" name="cartItemId" th:value="${item.cartItemId}"/>
          <button type="submit" class="btn btn-sm btn-danger">Xo√°</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <div class="text-end">
    <h5 class="text-primary">
      T·ªïng ti·ªÅn:
      <span th:text="${#numbers.formatDecimal(total, 0, 'POINT', 3, 'COMMA') + ' ƒë'}">0 ƒë</span>

    </h5>
    <a href="/checkout" class="btn btn-success">Ti·∫øn h√†nh thanh to√°n</a>
  </div>
</div>

</body>
</html>
